<link rel="import" href="../bower_components/core-menu-button/core-menu-button.html">
<link rel="import" href="../bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="../bower_components/core-dropdown/core-dropdown.html">
<link rel="import" href="../bower_components/paper-toggle-button/paper-toggle-button.html">

<polymer-element name="awall-menu">
    <template>
        <style>
            #menu, core-dropdown {
                background-color: #f2f2f2;
                border: 2px solid #000000;
                margin: 0;
            }

            core-dropdown {
                z-index: 200;
                min-width: 20em;
            }

            #menuContent {
                padding: 0.2em 1em;
            }

            #close {
                float: right;
            }

            a {
                text-decoration: none;
            }

            a:hover {
                font-weight: bold;
                text-decoration: underline;
                color: green;
            }

            ul {
                padding: 0;
            }

            li {
                margin: 0;
                list-style: none;
            }

            li, awall-menu-widget-toggle::shadow .toggle {
                padding: 0.75em 0.2em;
            }
        </style>
        <core-menu-button>
            <core-icon-button icon="menu" id="menu"></core-icon-button>
            <core-dropdown class="dropdown" halign="right" backdrop autoCloseDisabled closeSelector="#close">
                <core-icon-button icon="close" id="close"></core-icon-button>
                <div id="menuContent">
                    <h3>Widgets</h3>
                    <template repeat="{{widget in $.globals.activeWorkspace.widgets}}">
                        <awall-menu-widget-toggle name="{{widget.name}}"></awall-menu-widget-toggle>
                    </template>
                    <h3>Workspaces</h3>
                    <ul>
                        <template repeat="{{workspace in $.globals.workspaces}}">
                            <a href="{{workspace.parsedPath}}">
                                <li>{{workspace.name}}</li>
                            </a>
                        </template>
                    </ul>
                    <app-core id="globals"></app-core>
                </div>
            </core-dropdown>
        </core-menu-button>
    </template>
    <script>
        Polymer({});
    </script>
</polymer-element>


<polymer-element name="awall-menu-widget-toggle">
    <template>
        <div center horizontal layout class="toggle">
            <div flex>{{name}}</div>
            <paper-toggle-button checked?="{{isVisible}}" on-tap="{{onTap}}"></paper-toggle-button>
        </div>
    </template>
    <script>
        Polymer({
            publish: {
                name: "",
                isVisible: true
            },
            onTap: function (event) {
                // stop propagation of the event so the dropdown does not close
                event.stopPropagation();
            }
        });
    </script>
</polymer-element>
