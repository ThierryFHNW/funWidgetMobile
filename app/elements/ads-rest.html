<polymer-element name="ads-rest-collection" hidden attributes="resource response">
    <template>
        <core-ajax id="ajax" url="http://windows92.cs.technik.fhnw.ch/api/{{resource}}" handleAs="json" auto
                   auto on-core-response="{{onLoaded}}"></core-ajax>
    </template>
    <script>
        Polymer({
            onLoaded: function () {
                this.response = this.$.ajax.response;
            }
        });
    </script>
</polymer-element>

<polymer-element name="ads-rest-single" hidden attributes="resource resourceId response expand">
    <template>
        <core-ajax id="ajax" url="http://windows92.cs.technik.fhnw.ch/api/{{resource}}/{{resourceId}}" handleAs="json"
                   params='{ "expand": "{{expand}}" }' auto on-core-response="{{onLoaded}}"></core-ajax>
    </template>
    <script>
        Polymer({
            onLoaded: function () {
                this.response = this.$.ajax.response;
            },
            save: function (resource) {
                var ajax = this.$.ajax;
                ajax.method = resource.hasOwnProperty('id') ? 'PUT' : 'POST';
                ajax.body = JSON.stringify(resource);
                ajax.go();
            },
            remove: function (resource) {
                var ajax = this.$.ajax;
                ajax.method = 'DELETE';
                ajax.go();
            }
        });
    </script>
</polymer-element>


<polymer-element name="ads-project-view" noscript>
    <template>
        <h1>Projectname: {{project.name}}</h1>

        <p>Description: {{project.description}}</p>

        <h2>Sprints</h2>
        <template repeat="{{sprint in project.sprints}}">
            <ads-sprint-card sprint="{{sprint}}"></ads-sprint-card>
        </template>

        <h2>People:</h2>
        <template repeat="{{person in project.people}}">
            <ads-person-card person="{{person}}"></ads-person-card>
        </template>

        <ads-rest-single id="rest" resource="projects" expand="all" resourceId="ATBD"
                         response="{{project}}"></ads-rest-single>
    </template>
</polymer-element>

<polymer-element name="ads-sprint-card" attributes="sprint" noscript>
    <template>
        <p>
            <b>{{sprint.name}}</b>: {{sprint.description}}
        </p>
    </template>
</polymer-element>

<polymer-element name="ads-person-card" attributes="person" noscript>
    <template>
        <p>
            <b>{{person.name}}</b>: {{person.email}}
        </p>
    </template>
</polymer-element>