<polymer-element name="app-field-select">
    <template>
        <core-field>
            <label for="input">{{label}}</label>
            <core-dropdown-menu label="{{placeholder}}">
                <core-dropdown class="dropdown">
                    <core-menu id="menu" on-core-select="{{selectAction}}">
                        <template repeat="{{value in values}}">
                            <core-item label="{{value.name}}"></core-item>
                        </template>
                    </core-menu>
                </core-dropdown>
            </core-dropdown-menu>
        </core-field>
    </template>
    <script>
        Polymer({
            publish: {
                /**
                 * Label displayed beneath the actual select element.
                 *
                 * @attribute label
                 * @type string
                 * @default ''
                 */
                label: '',
                /**
                 * Placeholder text displayed in the select element, if nothing has been selected.
                 *
                 * @attribute placeholder
                 * @type string
                 * @default 'Select an item'
                 */
                placeholder: 'Select an item',
                /**
                 * The objects backing the select.
                 *
                 * @attribute values
                 * @type Array
                 * @default []
                 */
                values: [],
                /**
                 * The selected item.
                 *
                 * @attribute selected
                 * @type Object
                 * @default {}
                 */
                selected: {}
            },
            ready: function () {
                function getSelectedItemIndex() {
                    for (var i = 0; i < this.values.length; i++) {
                        if (this.values[i] === this.selected) {
                            return i;
                        }
                    }
                    return -1;
                }

                // set selected as index on core-menu
                this.$.menu.selected = getSelectedItemIndex.call(this);
            },
            selectAction: function (e, detail) {
                this.selected = this.values[this.$.menu.selected];
            }
        });
    </script>
</polymer-element>


<polymer-element name="app-field-textarea" attributes="label placeholder value" noscript>
    <template>
        <core-field>
            <label for="input">{{label}}</label>
            <textarea id="input" placeholder="{{placeholder}}" value="{{value}}"></textarea>
        </core-field>
    </template>
</polymer-element>


<polymer-element name="app-field-text" attributes="label placeholder value type" noscript>
    <template>
        <core-field>
            <label for="input">{{label}}</label>
            <input id="input" type="{{type}}" placeholder="{{placeholder}}" value="{{value}}"/>.
        </core-field>
    </template>
</polymer-element>